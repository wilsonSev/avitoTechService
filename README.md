# PR Reviewer Assignment Service

Сервис назначения ревьюверов для Pull Request’ов.  
Разработан в рамках тестового задания (Fall 2025).

## Функциональность

Сервис предоставляет HTTP API для управления:

- **командами** (Team)
- **пользователями** (User)
- **pull request’ами** (PullRequest)

### Основные возможности:

- Создание команды с участниками  
- Получение состава команды
- Включение/выключение активности пользователя
- Создание PR с автоматическим назначением до 2 активных ревьюверов из команды автора
- Переназначение ревьювера на случайного активного участника команды
- Merge PR (идемпотентно)
- Получение PR’ов, где пользователь назначен ревьювером

Полное описание всех ручек доступно в файле `openapi.yaml`.

---

## Архитектура

Сервис построен по многослойной архитектуре:

- `handlers/` – HTTP-слой (контроллеры)
- `services/` – бизнес-логика (доменный слой)
- `storage/` – работа с PostgreSQL через `pgxpool`
- `migrations/` – SQL миграции
- `internal/model` – доменные сущности

---

## Схема данных (PostgreSQL)

Миграции создают следующие таблицы:

- **teams** — список команд  
- **users** — пользователи с принадлежностью к командам  
- **pull_requests** — PR'ы  
- **pr_reviewers** — связи PR ↔ ревьюверы  

Файлы миграций: `migrations/001_init.up.sql`.

---

## ▶️ Запуск

Запуск производится одной командой:

```bash
docker-compose up --build
